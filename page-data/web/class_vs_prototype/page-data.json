{"componentChunkName":"component---src-templates-blog-post-js","path":"/web/class_vs_prototype/","result":{"data":{"site":{"siteMetadata":{"title":"Blog-Around"}},"markdownRemark":{"id":"f6ede366-a9e6-5895-ac25-f756f8cf201b","excerpt":"prototype에 대해서 공부를 하고 개념에 대해서 이해를 하고 있기는 했지만 이를 es6의 class와 직접 적으로 연관 시켜서 생각해본적은 없었다. \n이번에 공부를 하면서 알게된 내용들이 있어서 정리하게 되었다.  prototype chain과 상속 JS…","html":"<p>prototype에 대해서 공부를 하고 개념에 대해서 이해를 하고 있기는 했지만 이를 es6의 class와 직접 적으로 연관 시켜서 생각해본적은 없었다.\n이번에 공부를 하면서 알게된 내용들이 있어서 정리하게 되었다. </p>\n<h1>prototype chain과 상속</h1>\n<p>JS 는 타 언어들과 다르게 class 기반의 상속이 아니라 prototype의 상속을 채택하고 있다. js에서 prototype object이란 특정 종류의 객체의 내부 메소드와, 내부 프로퍼티 들에 대한 정보를 가진 설계도 객체이다.\nclass와 같이 object의 설계도 정도로 생각하면 될 것 같다. 특정 prototype을 가지고 있는 object는 prototype 내에 있는 속성들과 methods들을 사용할 수 있다.\n또한 prototype이 다른  prototype object로  prototype을 가질 수 있고, 메소드와 속성을 사용할 수 있는데, 이 것을 상속이라고 하고 이 prototype 간의 관계를 나타낸 것을 prototype chain이라고 한다.</p>\n<p>prototype chain: 프로토타입기반 상속 메커니즘에서 상속의 구조를 표현하는 자료구조로 <strong>proto</strong>를 계속해서 타고 올라가면서 해당 prototype에 메서드나 속성이 있는지 체크하는 구조로 작동한다. </p>\n<h1>prototype 상속</h1>\n<p>prototype 상속 방식은 2가지가 있다. 이 방식들을 보았을때, 유연하긴 하지만 상속을 언어 자체에서 제공하기보다 상속을 사용하기 위해\n애쓰는 느낌이었다. </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//super</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Ellipse</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">w<span class=\"token punctuation\">,</span>h</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>w<span class=\"token operator\">=</span>w<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>h<span class=\"token operator\">=</span>h<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">Ellipse</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">getArea</span><span class=\"token operator\">=</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span><span class=\"token operator\">*</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>a<span class=\"token operator\">*</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">Ellipse</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">toString</span><span class=\"token operator\">=</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">return</span> <span class=\"token string\">\"ellipse\"</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">//children</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Circle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">r</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>w<span class=\"token operator\">=</span>r<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>h<span class=\"token operator\">=</span>r<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">Circle</span><span class=\"token punctuation\">.</span>prototype<span class=\"token operator\">=</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Ellipse</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">,</span><span class=\"token punctuation\">{</span><span class=\"token comment\">// prototype을 상위 객체로 넣어준다. </span>\n    constructor<span class=\"token operator\">:</span><span class=\"token punctuation\">{</span>\n        configurable<span class=\"token operator\">:</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        enumerable<span class=\"token operator\">:</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        value<span class=\"token operator\">:</span>Circle<span class=\"token punctuation\">,</span><span class=\"token comment\">//constructor에는 자신을 넣어준다. </span>\n        writable<span class=\"token operator\">:</span><span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Circle</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>getArea<span class=\"token operator\">===</span><span class=\"token class-name\">Ellipse</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>getArea<span class=\"token punctuation\">)</span><span class=\"token comment\">//true</span></code></pre></div>\n<p>위의 방식에는 생성자는 상속이 안된다. 때문에 만약 생성자도 상속받아 확장 하고 싶으면 Circle의 구현을 바꿔줘야 한다. </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//children</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Circle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">r</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n   <span class=\"token function\">Ellipse</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>r<span class=\"token punctuation\">,</span>r<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 Object.create를 이용하는 방법 말고도 상속을 구현하는 방법도 있다. </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Ellipse</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">w<span class=\"token punctuation\">,</span>h</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>w<span class=\"token operator\">=</span>w<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>h<span class=\"token operator\">=</span>h<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">Ellipse</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">getArea</span><span class=\"token operator\">=</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span><span class=\"token operator\">*</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>a<span class=\"token operator\">*</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">Ellipse</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">toString</span><span class=\"token operator\">=</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">return</span> <span class=\"token string\">\"ellipse\"</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">//children</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Circle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">r</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>w<span class=\"token operator\">=</span>r<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>h<span class=\"token operator\">=</span>r<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">Circle</span><span class=\"token punctuation\">.</span>prototype<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Ellipse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">Circle</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>constructor<span class=\"token operator\">=</span>Circle<span class=\"token punctuation\">;</span></code></pre></div>\n<p>위방 식은 이미 생성된 Ellipse의 프로퍼티를 낭비하는 단점이 있다. </p>\n<h1>class 상속</h1>\n<p>es6부터 추가된 class 상속은 너무나 잘 알려져 있고 간단하다.\n단순히 extends 키워드를 이용해 Ellipse를 상속할 수 있다.\nclass를 사용하고 있긴 하지만 사실 사실 이 간단함 속에는 위의 과정이 내부적으로 일어나고 있기 때문이다. </p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Circle</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Ellipse</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">center<span class=\"token punctuation\">,</span>radius</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>center<span class=\"token operator\">=</span>center<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>radius<span class=\"token operator\">=</span>radius<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>아래의 코드를 콘솔에 입력해보면 class 도 prototype을 이용하고 있음을 알 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Foo</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>a<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>b<span class=\"token operator\">=</span><span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">fuzz</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fuzz'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> foo<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nfoo<span class=\"token punctuation\">.</span><span class=\"token function\">fuzz</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//fuzz</span>\nfoo<span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">.</span><span class=\"token function\">fuzz</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//fuzz</span>\n<span class=\"token class-name\">Foo</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">fuzz</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//fuzz</span></code></pre></div>\n<p>또한 아래처럼 새로운 class를 상속받아 만든 후 상속 받은 class가 같은 prototype객체에 있는 fuzz를 참조하고 있음을 알 수 있다.\n이는 위에서 직접 상속을 구현해준 방식에서도 확인 할 수 있었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Foo2</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Foo</span><span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">check</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//FOO 자신이 상속받고 있는 생성자 함수를 나타냄</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">fuzz2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fuzz2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> foo2<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Foo2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Foo2</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>fuzz<span class=\"token operator\">===</span><span class=\"token class-name\">Foo</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>fuzz<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//true</span></code></pre></div>\n<p>그리고 new Foo2().<strong>proto</strong>에 값을 새로 넣게 되면 어떻게 될까?\nFoo2의 prototype객체에 값이 추가되지만 Foo 원형은 변경되지 않는다.\n“prototype 상속”절에서 상위 생성자를 new 키워드로 생성해 넣어준 것 처럼 Foo의 인스턴스가 Foo2의 프로토타입이 되는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">Foo2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__proto__<span class=\"token punctuation\">.</span>b<span class=\"token operator\">=</span><span class=\"token number\">1000</span><span class=\"token punctuation\">;</span>\nFoo2<span class=\"token punctuation\">.</span>__proto__<span class=\"token comment\">//FOO {b: 100, constructor: ƒ}</span>\nFoo<span class=\"token punctuation\">.</span>b<span class=\"token comment\">//undefined 원본 생성함수엔 변화가 없다.</span>\n<span class=\"token class-name\">FOO2</span><span class=\"token punctuation\">.</span>prototype <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">FOO</span><span class=\"token comment\">//true instance of 는 prototype chain에 특정 생성함수가 있는지 확인해주는 키워드이다.</span></code></pre></div>","frontmatter":{"title":"prototype vs class in js","date":"September 19, 2021","description":"프로토 타입 상속에 대해 알아보고, es6의 class가 어떻게 구현 되어있는지 알아보자."}}},"pageContext":{"slug":"/web/class_vs_prototype/","previous":{"fields":{"slug":"/web/toread/"},"frontmatter":{"title":"읽어볼 글들."}},"next":{"fields":{"slug":"/web/function_things/"},"frontmatter":{"title":"js 함수, execution context"}}}},"staticQueryHashes":["2841359383","916993862"]}